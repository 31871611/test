<!DOCTYPE html>
<html ng-app="app">
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        .expander{border:1px solid #000000;width: 250px;}
        .expander > .title{background:#000000;color:#ffffff;padding:.1em .3em;cursor : pointer;}
        .expander > .body{padding:.1em .3em}
    </style>
    <script src="../js/angular-1.0.1.min.js"></script>
</head>
<body ng-controller="SomeController">
    <accordion>
        <expander class="expander" ng-repeat="expander in expanders" expander-title="expander.title">
            {{texpander.ext}}
        </expander>
    </accordion>
</body>
<script>
    var appModule=angular.module("app",[]);

    appModule.directive("accordion",function(){
        return{
            restrict:"EA",
            replace:true,
            template:"<div ng-transclude></div>",
            controller:function(){
                var expanders=[];
                this.gotOpened=function(selectedExpander){
                    angular.forEach(expanders,function(expander){
                        if(selectedExpander != expander){
                            expanders.showMe=false;
                        }
                    })
                };
                this.addExpander=function(expander){
                    expanders.push(expander);
                }
            }
        }
    });

    appModule.directive("expander",function(){
        return{
            restrict:"EA",
            replace:true,
            transclude:true,
            require:"^?accordion",
            scope:{title:"=expanderTitle"},
            template:'<div><div class="title" ng-click="toggle()">{{title}}</div><div class="body" ng-show="showMe" ng-transclude></div></div>',
            link:function(scope,element,attrs,accordionController){
                scope.showMe=false;
                accordionController.addExpander(scope);
                scope.toggle=function toggle(){
                    scope.showMe = !scope.showMe;
                    accordionController.gotOpened(scope);
                }
            }
        }
    });

    function SomeController($scope){
        $scope.expanders=[
            {title:"Click me to expand",text:"Hi there folks,I am the content that"},
            {title:"Click this",text:"I am even"},
            {title:"No,Click this",text:"I am text that"}
        ];
    }

</script>
</html>