<!DOCTYPE html>
<html ng-app="gutHub">
<head lang="en">
    <meta charset="UTF-8">
    <title>gutHub</title>
    <script src="../js/angular-1.0.1.min.js"></script>
</head>
<body>

<h1>gutHub</h1>
<div butterbar>Loading...</div>

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span2">
            <div id="focus"><a href="/#/news">New Recipe</a></div>
            <div><a href="/#">Recipe List</a></div>
        </div>
        <div class="span10"><div ng-view=""></div></div>
    </div>
</div>

</body>
<script>

    var app=angular.module("gutHub",["gutHub.directives","gutHub.services"]);
    app.config(["$routeProvider",function($routeProvider){
        $routeProvider.when("/",{
            controller:"ListCtrl",
//            resolve:{
//                recipes:function(MultiRecipeLoader){
//                    return MultiRecipeLoader();
//                }
//            },
            templateUrl:"Views/list.html"
        }).when("/view/:recipeId",{
//            controller:"ViewCtrl",
            templateUrl:"Views/viewRecipe.html"
        }).otherwise({
            redirectTo:"/"
        });
    }]);


    function ListCtrl($scope){
        $scope.recipes=[
            {id:"1",title:"title1"},
            {id:"2",title:"title2"},
            {id:"3",title:"title3"},
            {id:"4",title:"title4"},
            {id:"5",title:"title5"}
        ];
    }

    var directives=angular.module("gutHub.directives",[]);
    directives.direction("butterbar",["$rootScope",function($rootScope){
        return {
            link:function(scope,element,attrs){
                element.addClass("hide");
                $rootScope.$on("$routeChangeStart",function(){
                    element.removeClass("hide");
                });
            }
        }
    }]);
    $rootScope.$on("$routeChangeSuccess",function(){
        element.addClass("hide");
    });
    directives.directive("focus",function(){
        return{
            link:function(scope,element,attrs){
                element[0].focus();
            }
        }
    })

</script>
</html>