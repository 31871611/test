<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>去除字符串开始和结束的空字符</title>
</head>
<body>

</body>
<script>
/*
    为javascript的String对象添加一个新的方法
    trim 去掉字符串开始和结束的空字符，同时也将连续的空字符用一个空字符替换
*/
    String.prototype.trim=function(){
        var retValue=this;
        var ch=retValue.substring(0,1);
        while (ch == ' '){  //检查第一个字符是否为空字符
            retValue=retValue.substring(1,retValue.length);
            ch=retValue.substring(0,1);
        }
        ch=retValue.substring(retValue.length-1,retValue.length);

        while (ch == ' '){  //检查第后一个字符是否为空字符
            retValue=retValue.substring(0,retValue.length-1);
            ch=retValue.substring(retValue.length-1,retValue.length);
        }

        //这里有问题
        while (retValue.indexOf(' ') != -1){  //检查是否有两个连续的空字符
            retValue=retValue.substring(0,retValue.indexOf('  ')) +
            retValue.substring(retValue.indexOf(' ')+1,retValue.length);
        }
        return retValue;    //返回处理后的字符
    };


    //
    var aString='  this   is a new book.  ';
    document.write(aString);
    document.write('<br />');
    document.write(aString.trim());

</script>
</html>