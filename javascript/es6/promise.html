<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
/*


    function ajax(url,cb){
        // 建立请求，最终会调用cb()
    }

    ajax("http://some.url",function(err,contents){
        if(err){
            // 处理ajax错误
        }else{
            // 处理contents成功情况
        }
    })



    // 转换成promise方式，如下
    function ajax(url){
        return new Promise(function pr(resolve,reject){
            // 建立请求，最终会调用resolve(..)或者reject(..)
        });
    }

    ajax("http://some.url").then(
                                function fulfilled(contents){
                                    // 处理contents成功情况
                                    return ajax('http://some.url?v=' + contents)
                                },function rejected(reason){
                                    // 处理ajax出错原因
                                    return ajax('http://some.url?v=' + reason)
                                }
                            ).then(function fulfilled(data){
                                // contents来自于后续的ajax(...)调用，不管是哪个调用

                            })


*/
</script>
</html>