<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DOM基本操作</title>
    <style type="text/css">
        #box{
            height: 100px;
            border:10px solid #0E2D5F;
            overflow: auto;
        }
    </style>
</head>
<body>
<div id="box">
    测试Div<em>倾斜</em>结尾
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
    <p>1</p>
</div>
<h3>获取节点</h3>
<dl>
    <dt>document</dt>
    <dd>document.documentElement返回根元素html</dd>
    <dd>getElementById(元素ID)通过元素ID获取节点</dd>
    <dd>getElementsByName(元素name属性)通过元素的name属性获取节点</dd>
    <dd>getElementsByTagName(元素标签)通过元素标签获取节点</dd>

    <dt>节点指针</dt>
    <dd>firstChild</dd>
    <dd>语法：父节点.firstChild</dd>
    <dd>功能：获取元素的首个子节点</dd>

    <dd>lastChild</dd>
    <dd>语法：父节点.lastChild</dd>
    <dd>功能：获取元素的最后一个子节点</dd>

    <dd>childNodes</dd>
    <dd>语法：父节点.childNodes</dd>
    <dd>功能：获取元素的子节点列表</dd>

    <dd>previousSibling</dd>
    <dd>语法：兄弟节点.previousSibling</dd>
    <dd>功能：获取已知节点的前一个节点</dd>

    <dd>nextSibling</dd>
    <dd>语法：兄弟节点.nextSibling</dd>
    <dd>功能：获取已知节点的后一个节点</dd>

    <dd>parentNode</dd>
    <dd>语法：子节点.parentNode</dd>
    <dd>功能：获取已知节点的父节点</dd>

    <dd>ownerDocument</dd>
    <dd>返回包含当前节点的文档的根节点，相当与document</dd>
    <dd></dd>

    <dd>attributes</dd>
    <dd>获取当前元素节点的所有属性节点集合</dd>

</dl>

<h3>节点操作</h3>
<dl>
    <dt>创建节点</dt>
    <dd>createElement()</dd>
    <dd>语法：document.createElement(元素标签)</dd>
    <dd>功能：创建元素节点</dd>

    <dd>createAttribute()</dd>
    <dd>语法：document.createAttribute(元素属性)</dd>
    <dd>功能：创建属性节点</dd>

    <dd>createTextNode()</dd>
    <dd>语法：document.createTextNode(文本内容)</dd>
    <dd>功能：创建文本节点</dd>


    <dt>插入节点</dt>
    <dd>appendChild()</dd>
    <dd>语法：appendChild(所添加的新节点)</dd>
    <dd>功能：向节点的子节点列表的末尾添加新的子节点</dd>

    <dd>insertBefore()</dd>
    <dd>语法：insertBefore(所要添加的新节点，已知子节点)</dd>
    <dd>功能：在已知的子节点前插入一个新的子节点</dd>

    <!--
    
        //在已知节点后面创建一个节点

        //传入新节点、当前节点
        function insertAfter(newElement,targetElement){
            //得到交节点
            var parent=targetElement.parentNode;
            //如果最后一个子节点是当前元素，那么直接添加即可
            if(parent.lastChild === targetElement){
                parent.appendChild(newElement);
            }else{
                //在当前节点的下一个节点之前添加
                parent.insertBefore(newElement,targetElement.nextSibling);
            }
        }

    -->

    <dt>替换节点</dt>
    <dd>replaceChild()</dd>
    <dd>语法：replaceChild(要插入的新元素，将被替换的老元素)</dd>
    <dd>功能：将某个子节点替换为另一个</dd>

    <dt>复制节点</dt>
    <dd>cloneNode()</dd>
    <dd>语法：需要被复制的节点.cloneNode(true/false)</dd>
    <dd>功能：创建指定节点的副本</dd>
    <dd>参数：true，复制当前节点及其所有子节点；false，仅复制当前节点</dd>

    <dt>删除节点</dt>
    <dd>removeChild()</dd>
    <dd>语法：removeChild(要删除的节点)</dd>
    <dd>功能：删除指定的节点</dd>
</dl>

<h3>属性操作</h3>
<dl>
    <dt>获取属性</dt>
    <dd>getAttribute()</dd>
    <dd>语法：元素节点.getAttribute(元素属性名)</dd>
    <dd>功能：获取元素节点中指定属性的属性值</dd>

    <dt>设置属性</dt>
    <dd>setAttribute()</dd>
    <dd>语法：元素节点.setAttribute(属性名,属性值)</dd>
    <dd>功能：创建或改变元素节点的属性</dd>

    <dt>删除属性</dt>
    <dd>removeAttribute()</dd>
    <dd>语法：元素节点.removeAttribute(属性名)</dd>
    <dd>功能：删除元素中的指定属性</dd>
</dl>

<h3>文本操作</h3>
<dl>
    <dd>insertData(offset,string)从offset指定的位置插入string</dd>

    <dd>appendData(string)将string插入到文本节点的末尾处</dd>

    <dd>deleteData(offset,count)从offset起删除count个字符</dd>

    <dd>replaceData(offset,count,string)从offset将count个字符用string替代</dd>

    <dd>splitData(offset)从offset起将文本节点分成两个节点</dd>

    <dd>substring(offset,count)返回offset起count个节点</dd>
</dl>

<dl>
    <dt>节点</dt>
    <dd>nodeNode元素节点的父节点</dd>
    <dd>nodeName元素节点的名字，是只读的，对于元素节点就是大写的元素名，对于文字内容就是#test，对于document就是#document</dd>
    <dd>nodeValue元素节点的值，对于文字内容的节点，得到的就是文字内容</dd>
    <dd>nodeType</dd>
</dl>

<!--
console.log(document.getElementById('box').nodeType);       //1，元素节点

节点类型    nodeName                nodeType    nodeValue
元素       元素名称(与tagName一样)      1          null
属性       属性名称                    2          属性值
文本       #text                      3          文本内容(不包含html)


    //<div id="box">测试Div<em>倾斜</em>结尾</div>
    var box=document.getElementById('box');
    //alert(box.childNodes[0]);
    //console.log(box.childNodes[0]);

    //元素节点使用nodeName或者tagName获取标签名称
    //文本子节点使用nodeValue获取
    for(var i=0;i<box.childNodes.length;i++){
        //判断是元素节点，输出元素标签名
        if(box.childNodes[i].nodeType === 1){
            alert('元素节点：'+box.childNodes[i].nodeName);
        }else if(box.childNodes[i].nodeType === 3){
            //判断是文本节点，输出文本内容
            alert('文本节点：'+box.childNodes[i].nodeValue);
        }
    }


    //innerHtml和nodeValue的区别
    //1.取值，
    //2.赋值的时候，nodeValue会把含在文本里的HTML转义成特殊字符


-->


<ul>
    <li>document.documentElement,根节点html</li>
    <li>body只能用于document.body,得到body元素</li>
    <li>tagName返回当前节点的标记名称。document.documentElement.tagName</li>
    <li>hasChildNodes检查当前节点是否包含有子节点，如果有子节点，则返回一个true</li>
    <li>innerText获取文本内容或设置文本内容，火狐不支持</li>
    <li>innerHTML元素节点中的文字内容，包括html元素内容</li>
    <li>outerHTML会转义元素标签，不推荐使用</li>
    <li>outerText与innerText一样，火狐不支持，不推荐使用</li>
    <li>document.referrer，获取上一个url;历史记录上一个也可以？</li>
</ul>

<!--

    //innerText兼容火狐方法.textContent
    function getInnerText(element){
        return (typeof element.textContent === 'string') ? element.textContent : element.innerText;
    }

    function setInnerText(element,text){
        if(typeof element.textContent === 'string'){
            element.textContent=text;
        }else{
            element.innerText=text;
        }
    }

-->

<ul id="srcoll">
    <li>.title='';获取或设置title</li>
    <li>style修改或获得css属性。e.style.color="#fff";只能获得内联样式属性</li>
    <li>className设置或获得class属性。e.className="over";</li>
    <li>id设置或获得id属性e.id="over";</li>
</ul>

<dl>
    <dt>元素尺寸和位置</dt>
    <dd></dd>
</dl>

</body>
<script>


    //document.getElementById('srcoll').scrollIntoView(true);   //没效果

    var box=document.getElementById('box');
    //获取元素可视区大小包括内边距所占据大小，如果有滚动条会减去
    console.log(document.body.clientWidth);
    console.log(box.clientHeight);

    //获取滚动内容的元素大小。设置宽或高后实际内容宽高。包括内边距，如果有滚动条会减去
    console.log(box.scrollWidth);
    console.log(box.scrollHeight);

    //获取元素实际大小，包含边框、内边框、滚动条。不包括滚动内容实际大小
    console.log(box.offsetWidth);
    console.log(box.offsetHeight);

    //获取元素左边框和上边框的大小
    console.log(box.clientLeft);
    console.log(box.clientTop);

    //获取元素相对于父元素的位置
    console.log(box.offsetLeft);
    console.log(box.offsetTop);

    //得到父元素
    console.log(box.offsetParent);

    //获取滚动条距离
    console.log(document.body.scrollTop);
    console.log(document.body.scrollLeft);
    //火狐 || 谷歌
    var scrollTop=document.documentElement.scrollTop || document.body.scrollTop;
    console.log(scrollTop);

    //获取元素各边与页面上边的左边的距离
    console.log(box.getBoundingClientRect().top + '|' + getRect(box).top);          //元素上边距离页面上边的距离
    console.log(box.getBoundingClientRect().right + '|' + getRect(box).right);      //元素右边距离页面左边的距离
    console.log(box.getBoundingClientRect().bottom + '|' + getRect(box).bottom);    //元素下边距离页面上边的距离
    console.log(box.getBoundingClientRect().left + '|' + getRect(box).left);        //元素左边距离页面左边的距离

    //兼容ie。在ie中默认坐标从(2,2)开始
    function getRect(element){
        var rect=element.getBoundingClientRect();
        var top=document.documentElement.clientTop;
        var left=document.documentElement.clientLeft;

        return{
            top:rect.top-top,
            bottom:rect.bottom-top,
            left:rect.left-left,
            right:rect.right-left
        }

    }



    //BOM
    //window.innerWidth。返回浏览器窗口本身的尺寸
    //window.innerHeight
    //window.outerWidth。返回浏览器窗口本身+边框的尺寸
    //window.outerHeight
    //ie不支持以上
    alert(window.innerWidth + '|' + window.outerWidth);

    //ie标准模式
    alert(document.documentElement.clientWidth + '|' + document.documentElement.clientHeight);
    //ie非标准模式
    alert(document.body.clientWidth + '|' + document.body.clientHeight);

    var width=window.innerWidth;
    var height=window.innerHeight;
    if(typeof width != 'number'){                   //如果是ie，就使用document
        if(document.compatMode === 'CSS1Compat'){   //判断页面是否处于标准模式，如果返回CSS1Compat即标准模式
            width = document.documentElement.clientWidth;
            height = document.documentElement.clientHeight;
        }else{
            width = document.body.clientWidth;
            height = document.body.clientHeight;
        }
        //如果想测试ie8的标准模式，就判断document.documentMode > 7
    }


</script>
</html>